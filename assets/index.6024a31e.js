import{bh as U,bi as W,bj as w,bk as Y,r as f,P as F,ah as E,bl as G,x as Z,o as b,Z as B,$ as C,a6 as _,h as D,ap as K,v as I,F as V,j as g,bm as J,bn as Q,V as X,a4 as ee,a5 as T,bo as te,ak as ae,z as P,p as A,y as se,bp as k,bq as oe,br as ne,bs as ue,bd as re,bt as ce}from"../vendor.18c76fc2.js";import{E as le,a as ie,b as de,d as me,e as pe,f as fe,i as _e,l as he}from"../element-plus-vendor.cd905b71.js";import{i as z}from"../echarts-vendor.146610b4.js";import"../zrender-vendor.c3e0151a.js";const ve=function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function o(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(t){if(t.ep)return;t.ep=!0;const a=o(t);fetch(t.href,a)}};ve();const ge=e=>{const u=U();u.use(W({persist:!1,storage:{getItem:async o=>await w.getItem(o),setItem:async(o,c)=>await w.setItem(o,c),removeItem:async o=>await w.removeItem(o)}})),e.use(u)},be=[{name:"\u9996\u9875",path:"/",icon:"i-mdi:home"},{name:"\u4ED3\u5E93",path:"/stock",icon:"i-mdi:stock"},{name:"\u8D26\u672C",path:"/account",icon:"i-mdi:account"}],Ee=Y("header-store",()=>({title:f("\u9996\u9875")}),{persistedState:{persist:!0,storage:sessionStorage}}),De=g("i",{"text-2xl":"","i-mdi:shoe-ballet":""},null,-1),ye=g("p",null,"\u8001\u5317\u4EAC\u5E03\u978B",-1),Fe=F({__name:"TheHeader",setup(e){const{title:u}=E(Ee()),o=J(),c=Q(),t=f(c.path);G({title:u}),Z(c,({meta:n,path:s})=>{u.value=n.title,t.value=s});function a(n){o.push(n)}return(n,s)=>{const r=le,p=ie;return b(),B(p,{"default-active":t.value,class:"el-menu-demo",mode:"horizontal",ellipsis:!1,onSelect:a},{default:C(()=>[_(r,{"pointer-events-none":"",index:"0"},{default:C(()=>[De,ye]),_:1}),(b(!0),D(V,null,K(I(be),d=>(b(),B(r,{key:d.icon,index:d.path},{default:C(()=>[g("i",{class:X(d.icon)},null,2),ee(" "+T(d.name),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"])}}}),xe="./";let S;const L=te.create({baseURL:xe,timeout:15e3});L.interceptors.request.use(e=>(e.loading&&(S=de.service({fullscreen:!0})),e),e=>Promise.reject(e));L.interceptors.response.use(e=>(e.config.loading&&S.close(),e.data),e=>{var u,o;switch(e.config.loading&&S.close(),(u=e.response)==null?void 0:u.status){case 400:e.message="\u8BF7\u6C42\u9519\u8BEF(400)";break;case 401:e.message="\u672A\u6388\u6743(401)";break;case 403:e.message="\u62D2\u7EDD\u8BBF\u95EE(403)";break;case 404:e.message="\u8BF7\u6C42\u51FA\u9519(404)";break;case 408:e.message="\u8BF7\u6C42\u8D85\u65F6(408)";break;case 500:e.message="\u670D\u52A1\u5668\u9519\u8BEF(500)";break;case 501:e.message="\u670D\u52A1\u672A\u5B9E\u73B0(501)";break;case 502:e.message="\u7F51\u7EDC\u9519\u8BEF(502)";break;case 503:e.message="\u670D\u52A1\u4E0D\u53EF\u7528(503)";break;case 504:e.message="\u7F51\u7EDC\u8D85\u65F6(504)";break;case 505:e.message="HTTP\u7248\u672C\u4E0D\u53D7\u652F\u6301(505)";break;default:e.message=`\u8FDE\u63A5\u51FA\u9519(${(o=e.response)==null?void 0:o.status})!`}return me.error(e.message),Promise.reject(e)});function O(e,u,o=!0){return L.request({method:"GET",url:e,data:u,loading:o})}const ke=(e={})=>O("mock/stock.json",e),we=(e={})=>O("mock/account.json",e),H=Y("global-store",()=>{const e=f([]),u=f([]);return{g_stock:e,g_account:u}},{persistedState:{persist:!0,storage:localStorage}}),Ce={flex:"~ col","h-100vh":""},Be=F({__name:"App",setup(e){const{g_stock:u,g_account:o}=E(H());return u.value.length===0&&ke().then(c=>{u.value=c}),o.value.length===0&&we().then(c=>{o.value=c}),(c,t)=>{const a=Fe,n=ae("RouterView");return b(),D("div",Ce,[_(a),_(n,{"flex-1":"","overflow-auto":"","p-4":""})])}}}),Te="modulepreload",Ae=function(e,u){return new URL(e,u).href},$={},R=function(u,o,c){return!o||o.length===0?u():Promise.all(o.map(t=>{if(t=Ae(t,c),t in $)return;$[t]=!0;const a=t.endsWith(".css"),n=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const s=document.createElement("link");if(s.rel=a?"stylesheet":Te,a||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),a)return new Promise((r,p)=>{s.addEventListener("load",r),s.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>u())},Se=F({__name:"ThePie",props:{data:null,color:{default:()=>["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}},setup(e){const u=e,o=f(null);return P(()=>{var n;if(!o.value||!E(u).data.value)return;const c=z(o.value),{data:t,color:a}=E(u);c.setOption({tooltip:{trigger:"item",formatter:"{b}&nbsp;&nbsp;&nbsp;&nbsp;{c}\u53CC"},legend:{top:"5%",left:"center"},series:[{type:"pie",color:a.value,radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:(n=t.value)==null?void 0:n.map(([s,r])=>({value:r,name:s}))}]})}),(c,t)=>(b(),D("div",{ref_key:"PieRef",ref:o,"w-100":"","h-80":""},null,512))}}),Pe=F({__name:"TheBar",props:{title:{default:"\u5382\u5546"},data:null,color:{default:()=>["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}},setup(e){const u=e,o=f(null);return P(()=>{var p;if(!o.value||!E(u).data.value)return;const c=z(o.value),{title:t,data:a,color:n}=E(u),s=A(()=>{var d;return(d=a.value)==null?void 0:d.map(m=>m[0])}),r=A(()=>{var d;return(d=a.value)==null?void 0:d.map(m=>m[1])});c.setOption({title:{text:t.value},tooltip:{},xAxis:{data:s.value},yAxis:{type:"value",min:0,max:(p=r.value)==null?void 0:p.reduce((d,m)=>d+m),axisLine:{onZero:!1},minInterval:1,axisLabel:{formatter:"{value} \u53CC"}},series:[{colorBy:"data",type:"bar",showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"},color:n.value,barMaxWidth:40,data:r.value}]})}),(c,t)=>(b(),D("div",{ref_key:"barRef",ref:o,"w-100":"","h-80":""},null,512))}});function Le(){const e=(t,a)=>{const n=new Set,s=[];return t.forEach(r=>{n.has(r[a])||(n.add(r[a]),s.push(r))}),s};return{pickBy:e,uniqueBy:(t,a)=>{const n=e(t,a);return Array.from(new Set(n.map(s=>s[a]))).sort().filter(s=>s&&s!=="--")},countBy:(t,a)=>{const n=new Map;return t.map(s=>s[a]).forEach(s=>{n.has(s)?n.set(s,n.get(s)+1):n.set(s,1)}),[...n].sort((s,r)=>s[0]-r[0])},getTreeStock:t=>{const a=[],n=new Set,s=new Set;return t.forEach(r=>{if(n.has(r.id)){const{color:p,size:d}=r,m=a.find(h=>h.id===r.id);if(s.has(`${r.id}_${r.color}`)){const h=m==null?void 0:m.children.find(i=>i.color===r.color);h==null||h.sizes.push(d)}else s.add(`${r.id}_${r.color}`),m==null||m.children.push({color:p,sizes:[d]})}else{const{id:p,area:d,name:m,note:h,price:i,time:l,color:y,size:v}=r;n.add(r.id),s.add(`${r.id}_${r.color}`),a.push({id:p,area:d,name:m,note:h,price:i,time:l,children:[{color:y,sizes:[v]}]})}}),a}}}const Re={\u7EA2:"#ef4444",\u7C89:"#ec4899",\u6A59:"#f97316",\u9EC4:"#f59e0b",\u7EFF:"#84cc16",\u9752:"#06b6d4",\u84DD:"#3b82f6",\u7D2B:"#8b5cf6",\u68D5:"#78716c",\u9ED1:"#1f1f1f",\u767D:"#f2f2f2",\u7070:"#6b7280"},$e={class:"Home"},Me={flex:"","mb-4":"","content-center":"","text-5":""},Ye={"font-bold":""},Ie={"font-bold":"","ml-8":""},Ve=g("div",{"flex-1":""},null,-1),ze={class:"flex justify-between"},Oe={class:"flex justify-between mt-4"},j=F({__name:"index",setup(e){const{g_account:u}=E(H()),{countBy:o}=Le(),c=f([]),t=f(),a=f(),n=f(),s=f(),r=f(),p=f([]),d=[{text:"\u6700\u8FD1\u4E00\u5468",value:()=>{const i=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*7),[l,i]}},{text:"\u6700\u8FD1\u4E00\u4E2A\u6708",value:()=>{const i=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*30),[l,i]}},{text:"\u6700\u8FD1\u4E09\u4E2A\u6708",value:()=>{const i=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*90),[l,i]}},{text:"\u6700\u8FD1\u534A\u5E74",value:()=>{const i=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*180),[l,i]}},{text:"\u6700\u8FD1\u4E00\u5E74",value:()=>{const i=new Date,l=new Date;return l.setTime(l.getTime()-3600*1e3*24*365),[l,i]}}],m=A(()=>c.value.reduce((i,l)=>i+Number(l.price),0));se(()=>{p.value=[new Date,new Date],h(p.value)}),P(()=>{t.value=o(c.value,"name"),a.value=o(c.value,"color"),s.value=o(c.value,"size"),r.value=o(c.value,"price"),n.value=a.value.map(([i])=>Re[i])});function h(i){const[l,y]=i;c.value=u.value.filter(v=>k(v.time).format("YYYYMMDD")>=k(l).format("YYYYMMDD")).filter(v=>k(v.time).format("YYYYMMDD")<=k(y).format("YYYYMMDD"))}return(i,l)=>{const y=pe,v=Pe,x=Se,N=fe;return b(),D("div",$e,[g("div",Me,[g("p",Ye," \u603B\u91CF: "+T(c.value.length)+"\u53CC ",1),g("p",Ie," \u603B\u4EF7: "+T(I(m))+"\u5143 ",1),Ve,_(y,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=q=>p.value=q),class:"max-w-80",type:"daterange","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",shortcuts:d,onChange:h},null,8,["modelValue"])]),c.value.length?(b(),D(V,{key:0},[g("div",ze,[_(v,{title:"\u5382\u5546",data:t.value},null,8,["data"]),_(v,{title:"\u989C\u8272",data:a.value,color:n.value},null,8,["data","color"]),_(v,{title:"\u5C3A\u7801",data:s.value},null,8,["data"]),_(v,{title:"\u4EF7\u683C",data:r.value},null,8,["data"])]),g("div",Oe,[_(x,{data:t.value},null,8,["data"]),_(x,{data:a.value,color:n.value},null,8,["data","color"]),_(x,{data:s.value},null,8,["data"]),_(x,{data:r.value},null,8,["data"])])],64)):(b(),B(N,{key:1,"mt-40":"",description:"\u7CDF\u7CD5\uFF0C\u8FD8\u6CA1\u5F00\u5F20\u5462~"}))])}}}),M={};typeof M=="function"&&M(j);const He=()=>R(()=>import("../account.5992bf37.js"),["..\\account.5992bf37.js","account.37ba838f.css","..\\element-plus-vendor.cd905b71.js","element-plus-vendor.41e30905.css","..\\vendor.18c76fc2.js","vendor.5c167a30.css","..\\use-form.48f3d133.js","..\\echarts-vendor.146610b4.js","..\\zrender-vendor.c3e0151a.js"],import.meta.url),je=()=>R(()=>import("../stock.4dc5292c.js"),["..\\stock.4dc5292c.js","stock.37ba838f.css","..\\element-plus-vendor.cd905b71.js","element-plus-vendor.41e30905.css","..\\vendor.18c76fc2.js","vendor.5c167a30.css","..\\use-form.48f3d133.js","..\\echarts-vendor.146610b4.js","..\\zrender-vendor.c3e0151a.js"],import.meta.url),Ne=()=>R(()=>import("../all.ac95b1ce.js"),["..\\all.ac95b1ce.js","..\\vendor.18c76fc2.js","vendor.5c167a30.css","..\\element-plus-vendor.cd905b71.js","element-plus-vendor.41e30905.css","..\\echarts-vendor.146610b4.js","..\\zrender-vendor.c3e0151a.js"],import.meta.url),qe=[{name:"account",path:"/account",component:He,props:!0,meta:{title:"\u8D26\u672C"}},{name:"index",path:"/",component:j,props:!0,meta:{title:"\u9996\u9875"}},{name:"stock",path:"/stock",component:je,props:!0,meta:{title:"\u4ED3\u5E93"}},{name:"all",path:"/:all(.*)*",component:Ne,props:!0,meta:{title:"Page Not Found"}}],Ue=oe(),We=ne({history:ue(),routes:qe}),Ge=ce();re(Be).use(_e,{locale:he}).use(Ue).use(We).use(ge).provide("emitter",Ge).mount("#app");export{Le as a,M as b,Ee as c,H as u};
